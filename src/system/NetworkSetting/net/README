# 設定方式在 Setup 裡
# 輸入 bash Setup 即可完成設定
# 下面是指令的解釋

# ============================== Setup ==============================
# 把 Shell Scripts 文件 X.sh 複製到 /etc/init.d/X.sh
#sudo cp X.sh /etc/init.d/X.sh

# 設定成可執行的權限
#sudo chmod 755 /etc/init.d/X.sh 

# 加入開機啟動項目(移除設定把 defaults 改成 remove 即可)
#sudo update-rc.d -f X.sh defaults

# 執行此shell script(程式腳本設計)       
#sudo bash /etc/init.d/net

# ============================== net ==============================

# 創造一個叫做host的文件並把ifconfig的內容丟過去(待會使用grep會用到)
#ifconfig > host

# 給予eth0和eth1各一個變數,由於沒辦法鎖定乙太網路的代號所以可能會要修改
#host0=eth0 #可能要修改
#host1=eth1 #可能要修改

# 搜索host文件裡面有出現wlan的那行並放到host變數裡面 例: wlan0 Link encap:Ethernet HWaddr 0c:84:dc:03:0a:39
#host=$(grep "wlan" host)

# 把host這個變數的第0格到第6格的字元放到host2變數裡面,有可能是wlan0或wlan1等等(跟乙太網路不同,可以自動偵測,不須修改)
#host2=${host:0:6} 

# 設定ip分享器名稱和ip分享器密碼 
#name=TKU_IARC #ip分享器名稱
#passwd=1234567890 #ip分享器密碼

# 關閉 network-manager(如沒關閉則會影響接下來的動作)
#sudo /etc/init.d/network-manager stop

# 開啟乙太網路 eth0(可能要修改)和eth1(可能要修改)並設定ip
#sudo ifconfig $host0 192.168.16.100 up #Ethernet
#sudo ifconfig $host1 192.168.2.100 up #Ethernet

#  將 192.168.16.11 指定由 eth0 來進行封包收發。(由eth0負責與Camera通訊)
#  將 192.168.2.34 指定由 eth1 來進行封包收發。(由eth1負責與FPGA通訊)
#sudo route add -host 192.168.16.11 dev $host0 #Camera
#sudo route add -host 192.168.2.34 dev $host1 #FPGA

# 開啟無線網卡 wlan0(可能會變動)
#sudo ifconfig $host2 up

# 連上名稱為 TKU_IARC 密碼為 1234567890 並且用 wpa 加密的無線網路
#sudo wpa_passphrase $name $passwd > wpa.conf
#sudo wpa_supplicant -BDwext -i $host2 -c wpa.conf

# 手動向DHCP Server取得IP 192.168.0.100
sudo ifconfig $host2 192.168.0.100 #WIFI
sudo dhclient $host2


